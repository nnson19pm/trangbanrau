<!-- @format -->
<%- include("../partials/layout-top") %>

<div class="content-wrapper">
	<!-- Content -->

	<div class="container-xxl flex-grow-1 container-p-y">
		<h4 class="fw-bold py-3 mb-4"><span class="text-muted fw-light"></span>Sửa Blog</h4>

        <% if (messages['error']){ %>
            <div class="alert alert-danger alert-dismissible fade show" role="alert">
                <strong>Lỗi !</strong> <%= messages['error'] %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>

        <% if (messages['success']){ %>
            <div class="alert alert-success alert-dismissible fade show" role="alert">
                <strong>Thành công !</strong> <%= messages['success'] %>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
        <% } %>

		<!-- Basic Layout & Basic with Icons -->
		<div class="row">
			<!-- Basic Layout -->
			<div class="col-xxl">
				<div class="card mb-4">
					<div class="card-body">
						<form method="post" action="" enctype="multipart/form-data">
							<div class="row mb-3">
								<!--  -->
								<label class="col-sm-2 col-form-label" for="basic-default-name">Tên Tiêu Đề</label>
								<div class="col-sm-10">
									<input type="text" name="title" class="form-control" id="basic-default-name" required value="<%=blog?.title%>" />
								</div>
							</div>
							<!-- -->
							<!-- -->

							<!-- -->
							<div class="row mb-3">
								<label class="col-sm-2 col-form-label" for="basic-default-company">Ảnh thumbnails</label>
								<div class="col-sm-10">
									<input class="form-control" name="thumbnails" type="file" id="formFile" />
								</div>
							</div>

							<div class="row mb-3">
								<label class="col-sm-2 col-form-label" for="basic-default-message">Chủ Đề</label>
								<div class="col-sm-10">
									<select id="defaultSelect" name="blogCategoryId" class="form-select">
										<option value="0">Chọn chủ đề</option>
                                        <% for (let i = 0; i < blogCategory.length; i++){ %>
                                            <option value="<%= blogCategory[i]?.id %>"
                                            <% if (parseInt(blogCategory[i]?.id) === parseInt(blog?.categoryId)){ %>
                                                    selected
                                                    <% } %>
                                            >
                                                <%= blogCategory[i]?.name %>
                                            </option>
                                        <% } %>
									</select>
								</div>
							</div>
							<!--  -->
							<div class="row mb-3">
								<label class="col-sm-2 col-form-label" for="basic-default-name">Nội Dung</label>
								<div class="col-sm-10">
									<textarea name="content" id="editor" cols="30" rows="10"><%=blog?.content%></textarea>
								</div>
							</div>

							<!--  -->
							<input type="number" name="userId" class="form-control" hidden />

							<div class="row justify-content-end">
								<div class="col-sm-10">
									<button type="submit" class="btn btn-primary">Sửa</button>
								</div>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<script src="https://cdn.ckeditor.com/ckeditor5/33.0.0/classic/ckeditor.js"></script>
<script>
	ClassicEditor.create(document.querySelector('#editor'))
		.then((editor) => {
			console.log(editor);
		})
		.catch((error) => {
			console.error(error);
		});
</script>

<%- include("../partials/layout-bot") %>